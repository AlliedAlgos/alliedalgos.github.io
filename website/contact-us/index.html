<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact Us - Allied Algorithms</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <link rel="icon" type="image/x-icon" href="../images/logo.png">

  <script>
    $(function () {
      $("#navbar").load("../layout/navbar.html");
      $("#footer").load("../layout/footer.html");
    });
  </script>
</head>

<body class="bg-gray-900 text-gray-100 mt-[170px]">

  <div id="navbar" class="w-full"></div>

  <!-- Contact Section -->
  <section
    class="max-w-3xl mx-auto my-16 p-8
           bg-[rgba(20,20,30,0.7)]
           rounded-lg shadow-xl
           border border-white/10">

    <h2 class="text-3xl font-semibold mb-4 text-white">
      Get in Touch
    </h2>

    <p class="text-gray-300 mb-8">
      Have questions or want to collaborate? You may submit this form.
    </p>

    <form id="contactForm" class="space-y-6">

      <!-- Name (Optional) -->
      <div>
        <label class="block mb-1 font-medium">
          Name <span class="text-gray-400 text-sm"></span>
        </label>
        <input
          type="text"
          id="name"
          placeholder="Name"
          class="w-full p-3 rounded-md
                 bg-gray-800 border border-gray-700
                 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      </div>

      <!-- Email -->
      <div>
        <label class="block mb-1 font-medium">Email</label>
        <input    
          type="email"
          id="email"
          placeholder="email"
          required
          class="w-full p-3 rounded-md
                 bg-gray-800 border border-gray-700
                 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      </div>

      <!-- Message -->
      <div>
        <label class="block mb-1 font-medium">Message</label>
        <textarea
          id="message"
          rows="5"
          required
          class="w-full p-3 rounded-md
                 bg-gray-800 border border-gray-700
                 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
      </div>

      <!-- Button -->
      <button
        type="submit"
        class="w-full py-3 rounded-md
               bg-indigo-600 hover:bg-indigo-700
               font-semibold text-white
               transition">
        Send Message
      </button>

    </form>

    <p id="status" class="mt-6 text-center hidden"></p>
  </section>

  <div id="footer" class="w-full"></div>

  <!-- Discord Webhook -->
  <script>
    const DISCORD_WEBHOOK_URL =
      "https://discord.com/api/webhooks/1377087321203150941/iK28JWFiXjPouGOpEVnvhExkIqPdp8H7P7HT5oSJHdpPFOgMsOde9s8fD-xSnyl_MNbQ";

    const form = document.getElementById("contactForm");
    const status = document.getElementById("status");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const name =
        document.getElementById("name").value.trim() || "Anonymous";
      const email = document.getElementById("email").value.trim();
      const message = document.getElementById("message").value.trim();

      if (!email || !message) {
        status.textContent = "Please fill out the required fields.";
        status.className = "mt-6 text-center text-red-400";
        status.classList.remove("hidden");
        return;
      }

      status.textContent = "Sending message...";
      status.className = "mt-6 text-center text-yellow-400";
      status.classList.remove("hidden");

      const payload = {
        embeds: [{
          title: "ðŸ“© New Contact Submission",
          color: 5814783,
          fields: [
            { name: "Name", value: name, inline: true },
            { name: "Email", value: email },
            { name: "Message", value: message }
          ],
          timestamp: new Date().toISOString()
        }]
      };

      try {
        const res = await fetch(DISCORD_WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if (res.ok) {
          status.textContent = "Message sent successfully!";
          status.className = "mt-6 text-center text-green-400";
          form.reset();
        } else {
          throw new Error();
        }
      } catch {
        status.textContent = "Failed to send message.";
        status.className = "mt-6 text-center text-red-400";
      }
    });
  </script>

</body>
</html>
