<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARK ‚Äì Allied Relic Keeper</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
html { scroll-behavior: smooth; }
body { scroll-padding-top: 80px; }
.expand { max-height: 0; overflow: hidden; transition: max-height 0.6s cubic-bezier(.25,.8,.25,1);}
.expanded { max-height: 600px; }
canvas { width:100% !important; height:400px !important; }
@keyframes fadeIn { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }
.animate-fadeIn { animation: fadeIn 0.5s ease-out; }
section { padding: 80px 0; }
</style>
</head>
<body class="bg-gray-900 text-white font-sans">

<!-- NAVBAR (Portfolio Style Responsive) -->

<nav class="fixed top-0 w-full bg-gray-900 z-50 shadow-md">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <img src="https://alliedalgos.github.io/website/images/Allied-Algorithms_logo.svg" class="w-10 h-10">
      <span class="text-xl font-bold">ARK</span>
    </div>
    <div class="hidden md:flex gap-4">
      <a href="#sensors" class="nav-link px-3 py-2 rounded-md text-white hover:bg-gray-700">Sensors</a>
      <a href="#motion" class="nav-link px-3 py-2 rounded-md text-white hover:bg-gray-700">Motion Logs</a>
      <a href="#alerts" class="nav-link px-3 py-2 rounded-md text-white hover:bg-gray-700">Alerts</a>
      <a href="#map" class="nav-link px-3 py-2 rounded-md text-white hover:bg-gray-700">Map</a>
    </div>
    <div class="md:hidden">
      <button id="menuBtn" class="p-2 border rounded-md border-gray-500">‚ò∞</button>
    </div>
  </div>
  <div id="mobileMenu" class="hidden flex-col bg-gray-800 md:hidden">
    <a href="#sensors" class="block px-4 py-2 text-white hover:bg-gray-700">Sensors</a>
    <a href="#motion" class="block px-4 py-2 text-white hover:bg-gray-700">Motion Logs</a>
    <a href="#alerts" class="block px-4 py-2 text-white hover:bg-gray-700">Alerts</a>
    <a href="#map" class="block px-4 py-2 text-white hover:bg-gray-700">Map</a>
  </div>
</nav>

<!-- SENSORS SECTION -->

<section id="sensors" class="bg-gray-900">
  <h2 class="text-4xl font-bold mb-10 text-center">Sensors</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto px-4">

```
<!-- Temperature Card -->
<div class="bg-gray-800 rounded-2xl p-6 shadow-lg cursor-pointer card hover:scale-105 transition-transform">
  <div class="flex items-center gap-2">
    <img src="https://cdn-icons-png.flaticon.com/512/1684/1684375.png" class="w-8 h-8">
    <h3 class="text-2xl font-semibold">Temperature</h3>
  </div>
  <p class="text-3xl font-bold mt-4" id="temp">-- ¬∞C</p>
  <div class="expand mt-4">
    <canvas id="tempChart"></canvas>
  </div>
</div>

<!-- Humidity Card -->
<div class="bg-gray-800 rounded-2xl p-6 shadow-lg cursor-pointer card hover:scale-105 transition-transform">
  <div class="flex items-center gap-2">
    <img src="https://cdn-icons-png.flaticon.com/512/727/727790.png" class="w-8 h-8">
    <h3 class="text-2xl font-semibold">Humidity</h3>
  </div>
  <p class="text-3xl font-bold mt-4" id="humidity">-- %</p>
  <div class="expand mt-4">
    <canvas id="humChart"></canvas>
  </div>
</div>

<!-- Air Quality Card -->
<div class="bg-gray-800 rounded-2xl p-6 shadow-lg cursor-pointer card hover:scale-105 transition-transform">
  <div class="flex items-center gap-2">
    <img src="https://cdn-icons-png.flaticon.com/512/4831/4831100.png" class="w-8 h-8">
    <h3 class="text-2xl font-semibold">Air Quality</h3>
  </div>
  <p class="text-3xl font-bold mt-4" id="aqi">--</p>
  <div class="expand mt-4">
    <canvas id="aqiChart"></canvas>
  </div>
</div>
```

  </div>
</section>

<!-- MOTION LOGS SECTION -->

<section id="motion" class="bg-gray-800">
  <h2 class="text-4xl font-bold mb-10 text-center">Motion Logs</h2>
  <div class="max-w-4xl mx-auto p-6 bg-gray-700 rounded-2xl shadow-lg space-y-2" id="motionLog"></div>
</section>

<!-- ALERTS SECTION -->

<section id="alerts" class="bg-red-800">
  <h2 class="text-4xl font-bold mb-10 text-center">System Alerts</h2>
  <div class="max-w-4xl mx-auto p-6 rounded-2xl shadow-lg space-y-2" id="alertsLog"></div>
</section>

<!-- MAP SECTION -->

<section id="map" class="bg-gray-900">
  <h2 class="text-4xl font-bold mb-10 text-center">Map</h2>
  <div id="mapContainer" class="max-w-7xl mx-auto h-[500px] rounded-2xl shadow-lg"></div>
</section>

<script>
// ---------- MOBILE MENU ----------
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');
menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

// ---------- SENSOR DATA ----------
const maxDataPoints = 20;
const labels=[], tempData=[], humData=[], aqiData=[];

// Pre-fill data
for(let i=0;i<maxDataPoints;i++){
  const time = new Date(Date.now() - (maxDataPoints-i)*2000).toLocaleTimeString().slice(3,8);
  labels.push(time);
  tempData.push((20 + Math.random()*8).toFixed(1));
  humData.push((40 + Math.random()*40).toFixed(1));
  aqiData.push(Math.floor(20 + Math.random()*120));
}

// Display latest value on cards
document.getElementById("temp").textContent = tempData[tempData.length-1]+" ¬∞C";
document.getElementById("humidity").textContent = humData[humData.length-1]+" %";
document.getElementById("aqi").textContent = aqiData[aqiData.length-1];

// Create charts
const tempChart = new Chart(document.getElementById("tempChart"), {
  type:"line",
  data:{labels,datasets:[{label:"Temperature (¬∞C)",data:tempData,borderColor:"red",backgroundColor:"rgba(255,0,0,0.2)",tension:0.3}]},
  options:{responsive:true,animation:{duration:500},scales:{y:{beginAtZero:false}}}
});
const humChart = new Chart(document.getElementById("humChart"), {
  type:"line",
  data:{labels,datasets:[{label:"Humidity (%)",data:humData,borderColor:"blue",backgroundColor:"rgba(0,0,255,0.2)",tension:0.3}]},
  options:{responsive:true,animation:{duration:500},scales:{y:{beginAtZero:true}}}
});
const aqiChart = new Chart(document.getElementById("aqiChart"), {
  type:"line",
  data:{labels,datasets:[{label:"Air Quality (AQI)",data:aqiData,borderColor:"green",backgroundColor:"rgba(0,255,0,0.2)",tension:0.3}]},
  options:{responsive:true,animation:{duration:500},scales:{y:{beginAtZero:true}}}
});

// Cards expand
document.querySelectorAll(".card").forEach(card => {
  card.addEventListener("click",()=>card.querySelector(".expand").classList.toggle("expanded"));
});

// ---------- MOTION LOGS ----------
const motionLog=document.getElementById("motionLog");
const motionEvents=["üì¶ Box opened","üè∫ Artifact taken out","üè∫ Artifact put in","üö™ Door opened","‚ö° Motion detected"];
// Pre-fill motion logs
for(let i=0;i<10;i++){
  const event=motionEvents[Math.floor(Math.random()*motionEvents.length)];
  const timestamp=new Date(Date.now() - (10-i)*60000);
  const ts = timestamp.getHours()+":"+(timestamp.getMinutes()<10?'0':'')+timestamp.getMinutes();
  const div=document.createElement("div");
  div.textContent=`${event} at ${ts}`;
  div.className="bg-gray-600 p-3 rounded-md animate-fadeIn";
  motionLog.appendChild(div);
}

// ---------- ALERTS ----------
const alertsLog=document.getElementById("alertsLog");
const alertEvents=["üö® Motion Alert: Box opened","üö® Motion Alert: Artifact taken out","‚ö†Ô∏è Air Quality spike detected","‚ö†Ô∏è Temperature anomaly"];
// Pre-fill alerts
for(let i=0;i<5;i++){
  const msg = alertEvents[Math.floor(Math.random()*alertEvents.length)];
  const div=document.createElement("div");
  div.textContent=msg;
  div.className="bg-red-600 p-3 rounded-md animate-fadeIn";
  alertsLog.appendChild(div);
}

// ---------- MAP ----------
const mapContainer = document.getElementById('mapContainer');
mapContainer.style.height = "500px";
const map = L.map('mapContainer').setView([40.7128, -74.0060], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);
L.marker([40.7128, -74.0060]).addTo(map)
  .bindPopup('ARK Device Location')
  .openPopup();
setTimeout(()=>{ map.invalidateSize(); },200);

// ---------- REAL-TIME UPDATES ----------
function updateSensors(){
  const now = new Date().toLocaleTimeString().slice(3,8);
  const tempVal=(20+Math.random()*8).toFixed(1);
  const humVal=(40+Math.random()*40).toFixed(1);
  const aqiVal=Math.floor(20+Math.random()*120);

  document.getElementById("temp").textContent=tempVal+" ¬∞C";
  document.getElementById("humidity").textContent=humVal+" %";
  document.getElementById("aqi").textContent=aqiVal;

  labels.push(now); tempData.push(tempVal); humData.push(humVal); aqiData.push(aqiVal);
  if(labels.length>maxDataPoints){labels.shift(); tempData.shift(); humData.shift(); aqiData.shift();}
  tempChart.update(); humChart.update(); aqiChart.update();
}
setInterval(updateSensors, 2000);

// Add motion & alerts over time
function addMotionEvent(){
  const event=motionEvents[Math.floor(Math.random()*motionEvents.length)];
  const now=new Date();
  const ts = now.getHours()+":"+(now.getMinutes()<10?'0':'')+now.getMinutes();
  const div=document.createElement("div");
  div.textContent=`${event} at ${ts}`;
  div.className="bg-gray-600 p-3 rounded-md animate-fadeIn";
  motionLog.prepend(div);
  if(motionLog.children.length>10) motionLog.removeChild(motionLog.lastChild);

  if(Math.random()<0.4){
    const alertDiv=document.createElement("div");
    const alertMsg=`üö® Motion Alert: ${event} at ${ts}`;
    alertDiv.textContent=alertMsg;
    alertDiv.className="bg-red-600 p-3 rounded-md animate-fadeIn";
    alertsLog.prepend(alertDiv);
    if(alertsLog.children.length>5) alertsLog.removeChild(alertsLog.lastChild);
  }
}
setInterval(addMotionEvent, Math.random()*5000+5000);
</script>

</body>
</html>
